import{a as b,S as p,L as V}from"./sweetalert2-HwGyHZb6.js";import{u as _,r as g,c as x,a as s,b as k,d as e,w as u,F as C,e as r,o as h,f as c}from"./index-ChMq0LXP.js";const y={id:"loginPage",class:"bg-yellow"},L={class:"conatiner loginPage vhContainer"},E={class:"router-wrap"},F="https://todolist-api.hexschool.io",P={__name:"LoginView",setup(B){const f=_(),t=g({email:"",password:""}),v=()=>{l.value=!0,b.post(`${F}/users/sign_in`,t.value).then(a=>{l.value=!1;const{exp:o,token:n}=a.data;document.cookie=`myToken=${n}; expires=${new Date(o*1e3).toUTCString()};`,f.push("/todo"),p.fire({position:"top",title:"登入成功",icon:"success",timer:2e3,toast:!0,showConfirmButton:!1,timerProgressBar:!0})}).catch(a=>{l.value=!1,t.value={},p.fire({icon:"error",title:"請重試一次",text:a.response.data.message}),t.value={}})},l=g(!1);return(a,o)=>{const n=r("RouterLink"),m=r("VField"),d=r("ErrorMessage"),w=r("VForm");return h(),x(C,null,[s(k(V),{active:l.value},null,8,["active"]),e("div",y,[e("div",L,[o[8]||(o[8]=e("div",{class:"side"},[e("a",{href:"#"},[e("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),e("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),e("div",null,[s(w,{class:"formControls",onSubmit:v},{default:u(()=>[e("div",E,[s(n,{to:"/",class:"router-link"},{default:u(()=>o[2]||(o[2]=[c("登入頁")])),_:1}),s(n,{to:"/signup",class:"router-link"},{default:u(()=>o[3]||(o[3]=[c("註冊頁")])),_:1})]),o[4]||(o[4]=e("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),o[5]||(o[5]=e("label",{class:"formControls_label",for:"login-email"},"Email",-1)),s(m,{modelValue:t.value.email,"onUpdate:modelValue":o[0]||(o[0]=i=>t.value.email=i),class:"formControls_input",type:"email",id:"login-email",name:"Email",placeholder:"請輸入 email",rules:"required|email"},null,8,["modelValue"]),s(d,{name:"Email"}),o[6]||(o[6]=e("label",{class:"formControls_label",for:"login-pwd"},"密碼",-1)),s(m,{modelValue:t.value.password,"onUpdate:modelValue":o[1]||(o[1]=i=>t.value.password=i),class:"formControls_input",type:"password",name:"密碼",id:"login-pwd",placeholder:"請輸入密碼",rules:"required|min:6"},null,8,["modelValue"]),s(d,{name:"密碼"}),o[7]||(o[7]=e("button",{type:"submit",class:"btnLink"},"登入",-1))]),_:1})])])])],64)}}};export{P as default};
